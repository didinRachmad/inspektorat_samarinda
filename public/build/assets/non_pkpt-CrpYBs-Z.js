import{r}from"./routes-D3ctfpXk.js";import{A as i}from"./dashboard-Xs4gi4Ew.js";import"./parse-B3pZ8sEA.js";import"./vendor-DcHDpzIg.js";const s={datatable:()=>r("non_pkpt.data")};class o{constructor(){this.pageName="Non PKPT",this.datatableEl=$("#datatables")}initIndex(){console.log(`Halaman ${this.pageName} Index berhasil dimuat!`),this.initDataTable(),this.handleDelete()}initCreate(){console.log(`Halaman ${this.pageName} Create berhasil dimuat!`),this.initForm()}initEdit(){console.log(`Halaman ${this.pageName} Edit berhasil dimuat!`),this.initForm()}initDataTable(){this.datatableEl.DataTable({processing:!0,serverSide:!0,ajax:s.datatable(),columns:[{data:"DT_RowIndex",name:"DT_RowIndex",className:"text-center",orderable:!1,searchable:!1},{data:"id",name:"id",visible:!1},{data:"tahun",name:"tahun",className:"text-center"},{data:"bulan",name:"bulan",className:"text-center"},{data:"no_pkpt",name:"no_pkpt"},{data:"nama_auditi",name:"auditis.nama_auditi"},{data:"ruang_lingkup",name:"ruang_lingkup"},{data:"sasaran",name:"sasaran"},{data:"jadwal_rmp_bulan",name:"jadwal_rmp_bulan"},{data:"jadwal_rsp_bulan",name:"jadwal_rsp_bulan"},{data:"jadwal_rpl_bulan",name:"jadwal_rpl_bulan"},{data:"jadwal_hp_hari",name:"jadwal_hp_hari"},{data:"pj",name:"jabatans.pj",className:"text-center"},{data:"wpj",name:"jabatans.wpj",className:"text-center"},{data:"pt",name:"jabatans.pt",className:"text-center"},{data:"kt",name:"jabatans.kt",className:"text-center"},{data:"at",name:"jabatans.at",className:"text-center"},{data:"anggaran_total",name:"anggaran_total",className:"text-end",render:$.fn.dataTable.render.number(".",",",0,"Rp ")},{data:null,orderable:!1,searchable:!1,className:"text-center no-export",render:(a,e,t)=>{let n="";return t.can_edit&&(n+=`
                            <a href="${t.edit_url}" class="btn btn-sm btn-warning rounded-4" data-bs-toggle="tooltip" title="Edit">
                                <i class="bi bi-pencil-square"></i>
                            </a>`),t.can_delete&&(n+=`
                            <form action="${t.delete_url}" method="POST" class="d-inline form-delete">
                                <input type="hidden" name="_token" value="${$('meta[name="csrf-token"]').attr("content")}">
                                <input type="hidden" name="_method" value="DELETE">
                                <button type="button" class="btn btn-sm btn-danger rounded-4 btn-delete" data-bs-toggle="tooltip" title="Hapus">
                                    <i class="bi bi-trash-fill"></i>
                                </button>
                            </form>`),`<div class="d-flex justify-content-center gap-1">${n}</div>`}}],dom:"<'row'<'col-md-3'l><'col-md-6 text-center'><'col-md-3'f>><'row py-2'<'col-sm-12'tr>><'row'<'col-md-5'i><'col-md-7'p>>",paging:!0,responsive:!0,pageLength:20,lengthMenu:[[20,50,-1],[20,50,"Semua"]],order:[[1,"desc"]],info:!0,language:{sEmptyTable:"Tidak ada data yang tersedia di tabel",sInfo:"Menampilkan _START_ hingga _END_ dari _TOTAL_ entri",sInfoFiltered:"(disaring dari _MAX_ entri keseluruhan)",sLengthMenu:"Tampilkan _MENU_ entri",sLoadingRecords:"Memuat...",sProcessing:"Sedang memproses...",sSearch:"Cari:",sZeroRecords:"Tidak ditemukan data yang cocok",oAria:{sSortAscending:": aktifkan untuk mengurutkan kolom menaik",sSortDescending:": aktifkan untuk mengurutkan kolom menurun"}},drawCallback:()=>$('[data-bs-toggle="tooltip"]').each(function(){new bootstrap.Tooltip(this)})})}handleDelete(){document.addEventListener("click",a=>{const e=a.target.closest(".btn-delete");e&&confirm("Yakin hapus data ini?")&&e.closest("form").submit()})}initForm(){this.hitungTotalAnggaran(),document.querySelector("#jabatanTable").addEventListener("input",a=>{a.target.matches(".anggaran")&&this.hitungTotalAnggaran()})}hitungTotalAnggaran(){let a=0;document.querySelectorAll("#jabatanTable tbody tr").forEach(t=>{var l;const n=((l=i.getAutoNumericElement(t.querySelector(".anggaran")))==null?void 0:l.getNumber())??0;a+=n}),console.log(a);const e=document.getElementById("totalAnggaran");if(e){const t=i.getAutoNumericElement(e);t?t.set(a):e.value=a}}}const p=new o;export{p as default};
